
<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<div class="columnrow aem-GridColumn aem-GridColumn--default--12">
	<div class="row">
			<div class="col-md-6 order-md-1 none col-horizontal-alignment-left col-vertical-alignment-top col-mobile-horizontal-alignment-left" data-vertical-alignment="top" data-horizontal-alignment="left" data-mobile-horizontal-alignment="left">
			<div class="chart"></div>
		</div>
	</div>
</div>


</style>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>

<script>
var flare = 
{
 "name": "flare",
 "children": [
	{
	 "name": "India",
	 "children": [
		{
		 "name": "Mumbai",
		 "children": [
			{"name": "Building 1", "size": 65},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Gurgaon",
		 "children": [
		{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Bangalore",
		 "children": [
		{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Pune",
		 "children": [
		{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Chennai",
		 "children": [
			{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Hyderabad",
		 "children": [
			{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Kolkata",
		 "children": [
			{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Ahmedabad",
		 "children": [
			{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		}
	 ]
	},
	{
	 "name": "United States",
	 "children": [
		{
		 "name": "Chicago",
		 "children": [
			{"name": "Building 1", "size": 345},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Atlanta",
		 "children": [
		{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Austin",
		 "children": [
		{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Bellevue",
		 "children": [
		{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Berwyn",
		 "children": [
			{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Boise",
		 "children": [
			{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Boston",
		 "children": [
			{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		}
	 ]
	},
	{
	 "name": "Australia",
	 "children": [
		{
		 "name": "Adelaide",
		 "children": [
			{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Brisbane",
		 "children": [
		{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Canberra",
		 "children": [
		{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Bellevue",
		 "children": [
		{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Darwin",
		 "children": [
			{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Glen Waverley",
		 "children": [
			{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Gold Coast",
		 "children": [
			{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		},
		{
		 "name": "Melbourne",
		 "children": [
			{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		 ]
		}
	 ]
	},
	{
	 "name": "Singapore",
	 "children": [
			{"name": "Building 1", "size": 10},
			{"name": "Building 2", "size": 5},
			{"name": "Building 3", "size": 34},
			{"name": "Building 4", "size": 1}
		
	 ]
	}
	
	
	
	
	
	
 ]
};

var margin = {top: 30, right: 120, bottom: 0, left: 120},
		width = 650 - margin.left - margin.right,
		height = 300 - margin.top - margin.bottom;

var x = d3.scaleLinear()
		.range([0, width]);

var barHeight = 20;

var color = d3.scaleOrdinal()
		.range(["steelblue", "#ccc"]);

var duration = 750,
		delay = 25;

var xAxis = d3.axisTop(x);

var svg = d3.select(".chart").append("svg")
		.attr("width", width + margin.left + margin.right)
		.attr("height", height + margin.top + margin.bottom)
	.append("g")
		.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

svg.append("rect")
		.attr("class", "background")
		.attr("width", width)
		.attr("height", height)
		.on("click", up);

svg.append("g")
		.attr("class", "x axis");

svg.append("g")
		.attr("class", "y axis")
	.append("line")
		.attr("y1", "100%");

var root = d3.hierarchy(flare)
	.sum(function(d) { return d.size; });
x.domain([0, root.value]).nice();
down(root, 0);

function down(d, i) {
	if (!d.children || this.__transition__) return;
	var end = duration + d.children.length * delay;

	// Mark any currently-displayed bars as exiting.
	var exit = svg.selectAll(".enter")
			.attr("class", "exit");

	// Entering nodes immediately obscure the clicked-on bar, so hide it.
	exit.selectAll("rect").filter(function(p) { return p === d; })
			.style("fill-opacity", 1e-6);

	// Enter the new bars for the clicked-on data.
	// Per above, entering bars are immediately visible.
	var enter = bar(d)
			.attr("transform", stack(i))
			.style("opacity", 1);

	// Have the text fade-in, even though the bars are visible.
	// Color the bars as parents; they will fade to children if appropriate.
	enter.select("text").style("fill-opacity", 1e-6);
	enter.select("rect").style("fill", color(true));

	// Update the x-scale domain.
	x.domain([0, d3.max(d.children, function(d) { return d.value; })]).nice();

	// Update the x-axis.
	svg.selectAll(".x.axis").transition()
			.duration(duration)
			.call(xAxis);

	// Transition entering bars to their new position.
	var enterTransition = enter.transition()
			.duration(duration)
			.delay(function(d, i) { return i * delay; })
			.attr("transform", function(d, i) { return "translate(0," + barHeight * i * 1.2 + ")"; });

	// Transition entering text.
	enterTransition.select("text")
			.style("fill-opacity", 1);

	// Transition entering rects to the new x-scale.
	enterTransition.select("rect")
			.attr("width", function(d) { return x(d.value); })
			.style("fill", function(d) { return color(!!d.children); });

	// Transition exiting bars to fade out.
	var exitTransition = exit.transition()
			.duration(duration)
			.style("opacity", 1e-6)
			.remove();

	// Transition exiting bars to the new x-scale.
	exitTransition.selectAll("rect")
			.attr("width", function(d) { return x(d.value); });

	// Rebind the current node to the background.
	svg.select(".background")
			.datum(d)
		.transition()
			.duration(end);

	d.index = i;
}

function up(d) {
	if (!d.parent || this.__transition__) return;
	var end = duration + d.children.length * delay;

	// Mark any currently-displayed bars as exiting.
	var exit = svg.selectAll(".enter")
			.attr("class", "exit");

	// Enter the new bars for the clicked-on data's parent.
	var enter = bar(d.parent)
			.attr("transform", function(d, i) { return "translate(0," + barHeight * i * 1.2 + ")"; })
			.style("opacity", 1e-6);

	// Color the bars as appropriate.
	// Exiting nodes will obscure the parent bar, so hide it.
	enter.select("rect")
			.style("fill", function(d) { return color(!!d.children); })
		.filter(function(p) { return p === d; })
			.style("fill-opacity", 1e-6);

	// Update the x-scale domain.
	x.domain([0, d3.max(d.parent.children, function(d) { return d.value; })]).nice();

	// Update the x-axis.
	svg.selectAll(".x.axis").transition()
			.duration(duration)
			.call(xAxis);

	// Transition entering bars to fade in over the full duration.
	var enterTransition = enter.transition()
			.duration(end)
			.style("opacity", 1);

	// Transition entering rects to the new x-scale.
	// When the entering parent rect is done, make it visible!
	enterTransition.select("rect")
			.attr("width", function(d) { return x(d.value); })
			.on("end", function(p) { if (p === d) d3.select(this).style("fill-opacity", null); });

	// Transition exiting bars to the parent's position.
	var exitTransition = exit.selectAll("g").transition()
			.duration(duration)
			.delay(function(d, i) { return i * delay; })
			.attr("transform", stack(d.index));

	// Transition exiting text to fade out.
	exitTransition.select("text")
			.style("fill-opacity", 1e-6);

	// Transition exiting rects to the new scale and fade to parent color.
	exitTransition.select("rect")
			.attr("width", function(d) { return x(d.value); })
			.style("fill", color(true));

	// Remove exiting nodes when the last child has finished transitioning.
	exit.transition()
			.duration(end)
			.remove();

	// Rebind the current parent to the background.
	svg.select(".background")
			.datum(d.parent)
		.transition()
			.duration(end);
}

// Creates a set of bars for the given data node, at the specified index.
function bar(d) {
	var bar = svg.insert("g", ".y.axis")
			.attr("class", "enter")
			.attr("transform", "translate(0,5)")
		.selectAll("g")
			.data(d.children)
		.enter().append("g")
			.style("cursor", function(d) { return !d.children ? null : "pointer"; })
			.on("click", down);

	bar.append("text")
			.attr("x", -6)
			.attr("y", barHeight / 2)
			.attr("dy", ".35em")
			.style("text-anchor", "end")
			.text(function(d) { return d.data.name; });

	bar.append("rect")
			.attr("width", function(d) { return x(d.value); })
			.attr("height", barHeight);

	return bar;
}

// A stateful closure for stacking bars horizontally.
function stack(i) {
	var x0 = 0;
	return function(d) {
		var tx = "translate(" + x0 + "," + barHeight * i * 1.2 + ")";
		x0 += x(d.value);
		return tx;
	};
}

</script>
